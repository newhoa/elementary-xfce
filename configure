#!/bin/sh

help () {
    echo "Supported options are:"
    echo "    --help                  Print this help and exit"
    echo "    --prefix=<path>         Specify installation prefix, default <path> is /usr/local"
    echo "    --hidpi                 Use SVG icons for 2-3x scaling, high resolution displays"
}

PREFIX="/usr/local"
HIDPI="false"
while [ $# -gt 0 ]; do
    case $1 in
        --help)
            help
            exit 0
            ;;
        --prefix=*)
            PREFIX=`echo $1 | sed 's/--prefix=//'`
            ;;
        --hidpi)
            HIDPI="true"
            ;;
        *)
            echo "Unknown option $1"
            ;;
    esac
    shift
done

echo "Creating Makefile..."
sed -e s,@prefix@,$PREFIX, -e s,@hidpi@,$HIDPI, Makefile.in > Makefile
echo "Installation prefix is $PREFIX"
